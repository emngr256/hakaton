<template>
  <div class="min-h-screen">
    <!-- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π header -->
    <header class="fixed top-0 left-0 right-0 py-2 z-[9999]">
      <!-- –ö–Ω–æ–ø–∫–∞ –º–µ–Ω—é –∏ –ª–æ–≥–æ—Ç–∏–ø -->
      <div class="flex items-center justify-start px-4 gap-4">
        <!-- –ö–Ω–æ–ø–∫–∞ –º–µ–Ω—é -->
        <button 
          @click="toggleMenu"
          class="menu-button group"
          :aria-label="menuOpen ? '–ó–∞–∫—Ä—ã—Ç—å –º–µ–Ω—é' : '–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é'"
          :aria-expanded="menuOpen"
        >
          <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path 
              v-if="!menuOpen"
              stroke-linecap="round" 
              stroke-linejoin="round" 
              stroke-width="2" 
              d="M4 6h16M4 12h16M4 18h16"
            />
            <path 
              v-else
              stroke-linecap="round" 
              stroke-linejoin="round" 
              stroke-width="2" 
              d="M6 18L18 6M6 6l12 12"
            />
          </svg>
        </button>

        <!-- –õ–æ–≥–æ—Ç–∏–ø —Ä—è–¥–æ–º —Å –±—É—Ä–≥–µ—Ä–æ–º - –°–¢–ê–ù–î–ê–†–¢–ù–´–ô –†–ê–ó–ú–ï–† -->
        <NuxtLink 
          to="/" 
          class="logo-link-side"
          @click="closeMenu"
        >
          <span class="logo-text">Clean Waters</span>
        </NuxtLink>
      </div>

      <!-- –í—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é -->
      <div 
        v-show="menuOpen"
        class="dropdown-menu"
      >
        <NuxtLink 
          v-for="item in menuItems" 
          :key="item.path"
          :to="item.path" 
          class="menu-item"
          @click="closeMenu"
        >
          <span v-if="item.icon" class="mr-2">{{ item.icon }}</span>
          {{ item.label }}
        </NuxtLink>
      </div>

      <!-- Overlay –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–µ–Ω—é -->
      <div 
        v-show="menuOpen"
        class="menu-overlay"
        @click="closeMenu"
      ></div>
    </header>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="min-h-screen">
      <slot />
    </main>

    <!-- Footer -->
    <footer id="contact" class="bg-gray-900 text-gray-300 py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8">
          <!-- About Section -->
          <div>
            <div class="flex items-center gap-2 mb-4">
              <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center">
                <span class="text-white">üåä</span>
              </div>
              <div>
                <div class="font-semibold text-white">–ú–∞–Ω—Å—É—Ä –∏ –ê–ª–∞–Ω</div>
                <div class="text-xs">–ü–µ—Ç—Ä–æ–ø–∞–≤–ª–æ–≤—Å–∫</div>
              </div>
            </div>
            <p class="text-sm">
              –û–±—â–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞ –ø–æ –∑–∞—â–∏—Ç–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—é –æ–∑—ë—Ä –≥–æ—Ä–æ–¥–∞ –ü–µ—Ç—Ä–æ–ø–∞–≤–ª–æ–≤—Å–∫–∞.
            </p>
          </div>

          <!-- Contacts Section -->
          <div>
            <h4 class="text-white mb-4">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h4>
            <div class="space-y-3">
              <div class="flex items-center gap-2">
                <Mail :size="16" />
                <span class="text-sm">sample@email.com</span>
              </div>
              <div class="flex items-center gap-2">
                <Phone :size="16" />
                <span class="text-sm">+7 (XXX) XXX-XXX</span>
              </div>
              <div class="flex items-center gap-2">
                <MapPin :size="16" />
                <span class="text-sm">–≥. –ü–µ—Ç—Ä–æ–ø–∞–≤–ª–æ–≤—Å–∫, –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω</span>
              </div>
            </div>
          </div>

          <!-- Social Media Section -->
          <div>
            <h4 class="text-white mb-4">–°–ª–µ–¥–∏—Ç–µ –∑–∞ –Ω–∞–º–∏</h4>
            <div class="flex gap-4">
              <a 
                href="https://aim-hktn.netlify.app/" 
                class="w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-blue-600 transition-colors"
                aria-label="Netlify"
              >
                <Monitor :size="20" />
              </a>
              <a 
                href="https://github.com/emngr256/hakaton/" 
                class="w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-blue-600 transition-colors"
                aria-label="Github"
              >
                <Github :size="20" />
              </a>
              <a 
                href="https://youtube.com/" 
                class="w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-blue-600 transition-colors"
                aria-label="Youtube"
              >
                <Youtube :size="20" />
              </a>
            </div>
            <div class="mt-6">
              <p class="text-sm text-gray-400">
                –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –Ω–∞—à–µ–º—É —Å–æ–æ–±—â–µ—Å—Ç–≤—É –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –Ω–æ–≤–æ—Å—Ç–∏ –æ –ø—Ä–∏—Ä–æ–¥–æ–æ—Ö—Ä–∞–Ω–Ω—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö.
              </p>
            </div>
          </div>
        </div>

        <!-- Copyright Section -->
        <div class="border-t border-gray-800 pt-8">
          <div class="flex flex-col md:flex-row justify-between items-center gap-4">
            <p class="text-sm text-gray-400">
              ¬© {{ currentYear }} –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
            </p>
            <div class="flex gap-6 text-sm">
              <button @click="$router.push('/policy')" class="hover:text-white transition-colors px-4 py-2 hover:bg-blue-500">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</button>
              <button @click="$router.push('/conditions')" class="hover:text-white transition-colors px-4 py-2 hover:bg-blue-500">–£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</button>
            </div>
          </div>
        </div>
      </div>
    </footer>
  </div>
</template>

<script setup lang="ts">
import { Mail, Phone, MapPin, Youtube, Github, Monitor } from 'lucide-vue-next'
import Conditions from '~/pages/conditions.vue'
import Policy from '~/pages/policy.vue'

// –°–æ—Å—Ç–æ—è–Ω–∏–µ –º–µ–Ω—é
const menuOpen = ref(false)

// –¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞ –∏ –≥–æ–¥
const currentDate = ref(new Date().toLocaleDateString('ru-RU'))
const currentYear = ref(new Date().getFullYear())

// –≠–ª–µ–º–µ–Ω—Ç—ã –º–µ–Ω—é (–ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å/—É–¥–∞–ª—è—Ç—å)
const menuItems = [
  { path: '/', label: '–ì–ª–∞–≤–Ω–∞—è', icon: 'üè†' },
  { path: '/dropdownbar/map', label: '–ö–∞—Ä—Ç–∞', icon: 'üó∫Ô∏è' },
  { path: '/dropdownbar/temperature', label: '–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞', icon: 'üå°Ô∏è' },
  { path: '/dropdownbar/water-level', label: '–£—Ä–æ–≤–µ–Ω—å –≤–æ–¥—ã', icon: 'üíß' },
  { path: '/dropdownbar/infection', label: '–ó–∞—Ä–∞–∂–µ–Ω–∏–µ', icon: '‚ö†Ô∏è' },
  { path: '/suggestions', label: '–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è', icon: 'üìã' },
]

// –§—É–Ω–∫—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–µ–Ω—é
const toggleMenu = () => {
  menuOpen.value = !menuOpen.value
}

const closeMenu = () => {
  menuOpen.value = false
}

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø–æ Escape
onMounted(() => {
  const handleEscape = (e: KeyboardEvent) => {
    if (e.key === 'Escape' && menuOpen.value) {
      closeMenu()
    }
  }
  window.addEventListener('keydown', handleEscape)
  
  onUnmounted(() => {
    window.removeEventListener('keydown', handleEscape)
  })
})
</script>

<style scoped>
/* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ */
html, body {
  margin: 0;
  padding: 0;
  overflow-x: hidden;
}

/* –ö–Ω–æ–ø–∫–∞ –º–µ–Ω—é */
.menu-button {
  @apply p-3 bg-black/30 backdrop-blur-sm rounded-full shadow-lg 
         hover:bg-black/50 active:scale-95
         transition-all duration-300 border border-white/20;
}

/* –í—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é */
.dropdown-menu {
  @apply absolute top-12 left-4 
         bg-black/70 backdrop-blur-md text-white 
         rounded-xl shadow-2xl py-1 min-w-48 
         z-[9999] border border-white/20
         overflow-hidden;
}

/* –≠–ª–µ–º–µ–Ω—Ç –º–µ–Ω—é */
.menu-item {
  @apply block px-4 py-3 
         hover:bg-white/20 active:bg-white/30
         transition-all duration-200 
         border-b border-white/10 last:border-b-0
         flex items-center;
}

/* Overlay */
.menu-overlay {
  @apply fixed inset-0 bg-black/20 backdrop-blur-sm z-[9998];
}

/* –õ–æ–≥–æ—Ç–∏–ø —Ä—è–¥–æ–º —Å –±—É—Ä–≥–µ—Ä–æ–º - –°–¢–ê–ù–î–ê–†–¢–ù–´–ô –†–ê–ó–ú–ï–† */
.logo-link-side {
  @apply hidden md:flex items-center gap-2 px-4 py-2 
         bg-black/30 backdrop-blur-sm rounded-full 
         border border-white/20 shadow-lg
         hover:bg-black/50 transition-all duration-300;
}

.logo-text {
  @apply text-white font-semibold text-lg tracking-wide;
}

/* Footer heading */
h4 {
  @apply text-lg font-semibold;
}
</style>